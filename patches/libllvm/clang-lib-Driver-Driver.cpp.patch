diff --git a/clang/lib/Driver/Driver.cpp b/clang/lib/Driver/Driver.cpp
index 93cddf742..e54c7564d 100644
--- a/clang/lib/Driver/Driver.cpp
+++ b/clang/lib/Driver/Driver.cpp
@@ -168,7 +168,9 @@ std::string Driver::GetResourcesPath(StringRef BinaryPath,
   // exact same string ("a/../b/" and "b/" get different hashes, for example).
 
   // Dir is bin/ or lib/, depending on where BinaryPath is.
-  std::string Dir = std::string(llvm::sys::path::parent_path(BinaryPath));
+  std::string Dir = std::string(
+    llvm::sys::path::parent_path(llvm::sys::path::parent_path(BinaryPath))
+  );
 
   SmallString<128> P(Dir);
   if (CustomResourceDir != "") {
